scalar Date

type Query {
  # admin func
  fileSource(sourceId: ID!): FileSource
  fileSourceList(status: TranscodeStatus, skip: Int!, take: Int!): FileSourceList!

  recordSource(sourceId: ID!): RecordSource
  recordSourceList(skip: Int!, take: Int!): RecordSourceList!

  source(sourceId: ID!): SourceReference!
  sourceList(
    type: SourceType,
    status: TranscodeStatus,
    skip: Int!,
    take: Int!,
  ): SourceList!

  rtmpInput(id: ID!): RtmpInput
  rtmpInputList(skip: Int!, take: Int!): RtmpInputList!

  users(kind: UserKind, type: IdPType, skip: Int!, take: Int!): Users!

  channel(id: String!): Channel
  channelList(skip: Int!, take: Int!): ChannelList!

  schedule(id: ID!): Schedule
  scheduleList(
    skip: Int!,
    take: Int!,
    startAt: Date,
    endAt: Date,
    channel: [String!],
  ): ScheduleList!

  transcodePreset(id: ID!): TranscodePreset
  transcodePresetList(skip: Int!, take: Int!): TranscodePresetList!

  viewerRequests: [ViewerChallengeRequest!]!

  # normal func
  me: User
  viewerChallengeResult(token: String!): ViewerChallengeResult!
}

type Mutation {
  # admin func
  createFileSourceUpload(fileInfo: UploadFileInfo!): FileSource!
  uploadFileSourceChunk(sourceId: String!, file: UploadFileChunk!): Boolean!
  probeFileSource(sourceId: String!): Boolean!

  createRtmpInput(name: String!, presetId: ID!): RtmpInput!
  removeRtmpInput(id: ID!): Boolean!

  createTranscodePreset(name: String!, parameter: [String!]!): TranscodePreset!

  enqueueFileSourceTranscode(sourceId: ID!, presetId: ID!): Boolean!

  createChannel(
    id: String!,
    displayName: String!,
    fillerSources: [ID!],
    fillerControl: FillerControl,
    permission: ChannelPermission,
  ): Channel!
  updateChannel(
    id: String!,
    displayName: String,
    fillerControl: FillerControl,
    permission: ChannelPermission,
  ): Channel!
  addFillerToChannel(
    id: String!,
    sources: [ID!]!,
  ): [ID!]!
  removeFillerFromChannel(
    id: String!,
    sources: [ID!]!,
  ): [ID!]!

  createSchedule(
    channelId: String!,
    startAt: Date!,
    endAt: Date!,
    title: String!,
  ): Schedule!
  updateSchedule(
    scheduleId: ID!,
    title: String,
    startAt: Date,
    endAt: Date,
  ): Schedule!

  addProgramToSchedule(
    scheduleId: ID!,
    before: ID,
    duration: Float!,
    type: ProgramType!,
    sourceId: ID,
  ): Schedule!
  removeProgramFromSchedule(
    scheduleId: ID!,
    programId: ID!
  ): Schedule!
  updateProgram(
    scheduleId: ID!,
    programId: ID!,
    duration: Float,
    type: ProgramType,
    sourceId: ID,
  ): Schedule!
  updateProgramOrder(
    scheduleId: ID!,
    order: [ID!]!
  ): Schedule!

  createViewerChallenge(device: DeviceType!): ViewerChallenge!
  acceptViewerChallenge(deviceId: String!): Boolean!
}

schema {
  query: Query
  mutation: Mutation
}
